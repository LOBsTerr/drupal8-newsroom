id: newsroom_topic_translations
label: Newsroom topic
migration_group: newsroom
deriver: 'Drupal\nexteuropa_newsroom_topic\Plugin\migrate\NewsroomTopicLanguageDeriver'
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: simple_xml
  urls: 'http://lobsterr.me/topics.xml'

  item_selector: '//channel/item'

  ids:
    topic_id:
      type: integer

  fields:
    -
      name: topic_id
      label: 'Topic ID'
      selector: '@infsonewsroom:TopicId'
    -
      name: topic_name
      label: Name
      selector: 'text()'

process:

  vid:
    plugin: default_value
    default_value: newsroom_topic

  tid:
    plugin: migration_lookup
    source: topic_id
    migration: newsroom_topic

  name:
    plugin: get
    source: topic_name

  content_translation_source:
    plugin: default_value
    default_value: 'en'

destination:
  plugin: entity:taxonomy_term
  translations: true

dependencies:
  enforced:
    module:
      - nexteuropa_newsroom_topic
